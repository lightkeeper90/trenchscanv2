<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrenchScan // Migrated Token Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Mode (Flappy Bird) - Default */
            --sky-top: #4ec0ca;
            --sky-bottom: #bee6f7;
            --pipe-green: #73bf2e;
            --pipe-green-dark: #5a9c24;
            --pipe-green-light: #8fd43e;
            --ground-tan: #ded895;
            --ground-dark: #c9b86a;
            --text-primary: #2d5016;
            --text-secondary: #4a7c23;
            --text-muted: #6b8f4a;
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-border: rgba(115, 191, 46, 0.5);
            --shadow: rgba(0, 0, 0, 0.15);
            --pink-accent: #ec4899;
            --orange-accent: #f97316;
            --yellow-accent: #eab308;
            --red-accent: #ef4444;
            --green-accent: #73bf2e;
            --cloud-color: rgba(255, 255, 255, 0.9);
            --table-header-bg: rgba(115, 191, 46, 0.15);
            --table-row-hover: rgba(115, 191, 46, 0.1);
        }

        [data-theme="dark"] {
            --sky-top: #0a0e14;
            --sky-bottom: #0d1a12;
            --pipe-green: #1a5c2e;
            --pipe-green-dark: #0d3d1a;
            --pipe-green-light: #2d8a47;
            --ground-tan: #1a1812;
            --ground-dark: #0f0e0a;
            --text-primary: #e8f0ec;
            --text-secondary: #8ba89a;
            --text-muted: #4a6055;
            --card-bg: rgba(18, 24, 20, 0.95);
            --card-border: rgba(45, 138, 71, 0.4);
            --shadow: rgba(0, 0, 0, 0.3);
            --pink-accent: #ec4899;
            --orange-accent: #f97316;
            --yellow-accent: #eab308;
            --red-accent: #ef4444;
            --green-accent: #22c55e;
            --cloud-color: rgba(40, 55, 48, 0.5);
            --table-header-bg: rgba(34, 197, 94, 0.1);
            --table-row-hover: rgba(34, 197, 94, 0.1);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            border-radius: 50px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px var(--shadow);
        }

        .theme-toggle .icon {
            font-size: 18px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(180deg, var(--sky-top) 0%, var(--sky-bottom) 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        /* Clouds */
        .cloud {
            position: fixed;
            background: var(--cloud-color);
            border-radius: 20px;
            opacity: 0.6;
            z-index: 0;
            animation: floatCloud 60s linear infinite;
        }

        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: var(--cloud-color);
            border-radius: 50%;
        }

        .cloud-1 { width: 100px; height: 40px; top: 80px; left: -100px; animation-duration: 45s; }
        .cloud-1::before { width: 50px; height: 50px; top: -25px; left: 15px; }
        .cloud-1::after { width: 35px; height: 35px; top: -15px; left: 50px; }

        .cloud-2 { width: 80px; height: 30px; top: 150px; left: -80px; animation-duration: 55s; animation-delay: 10s; }
        .cloud-2::before { width: 40px; height: 40px; top: -20px; left: 10px; }
        .cloud-2::after { width: 30px; height: 30px; top: -12px; left: 40px; }

        .cloud-3 { width: 120px; height: 45px; top: 200px; left: -120px; animation-duration: 65s; animation-delay: 20s; }
        .cloud-3::before { width: 60px; height: 60px; top: -30px; left: 20px; }
        .cloud-3::after { width: 45px; height: 45px; top: -20px; left: 60px; }

        @keyframes floatCloud {
            from { transform: translateX(0); }
            to { transform: translateX(calc(100vw + 200px)); }
        }

        /* City silhouette */
        .city-bg {
            position: fixed;
            bottom: 80px;
            left: 0;
            width: 200%;
            height: 150px;
            background: repeating-linear-gradient(90deg,
                transparent 0px, transparent 30px,
                rgba(34, 197, 94, 0.1) 30px, rgba(34, 197, 94, 0.1) 35px,
                transparent 35px, transparent 50px,
                rgba(34, 197, 94, 0.08) 50px, rgba(34, 197, 94, 0.08) 60px,
                transparent 60px, transparent 80px,
                rgba(34, 197, 94, 0.12) 80px, rgba(34, 197, 94, 0.12) 90px,
                transparent 90px, transparent 120px
            );
            z-index: 0;
            animation: scrollCity 30s linear infinite;
        }

        @keyframes scrollCity {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        /* Ground */
        .ground {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: var(--ground-tan);
            border-top: 8px solid var(--ground-dark);
            z-index: 1;
        }

        .ground::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 0;
            width: 200%;
            height: 20px;
            background: repeating-linear-gradient(90deg,
                var(--pipe-green) 0px, var(--pipe-green) 20px,
                var(--pipe-green-dark) 20px, var(--pipe-green-dark) 40px
            );
            animation: scrollGround 10s linear infinite;
        }

        @keyframes scrollGround {
            from { transform: translateX(0); }
            to { transform: translateX(-40px); }
        }

        /* Skeleton Loading Animation */
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .skeleton {
            background: linear-gradient(90deg, 
                var(--card-bg) 25%, 
                rgba(115, 191, 46, 0.1) 50%, 
                var(--card-bg) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 4px;
        }

        .skeleton-row td {
            padding: 16px 12px;
        }

        .skeleton-token {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .skeleton-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .skeleton-text {
            height: 14px;
            border-radius: 4px;
        }

        .skeleton-text.name { width: 100px; margin-bottom: 6px; }
        .skeleton-text.symbol { width: 60px; }
        .skeleton-text.badge { width: 80px; height: 22px; }
        .skeleton-text.mcap { width: 70px; }
        .skeleton-text.time { width: 50px; }
        .skeleton-text.social { width: 70px; height: 28px; }

        /* Fade in animation for loaded content */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .token-row {
            animation: fadeInUp 0.3s ease-out forwards;
            opacity: 0;
        }

        /* Header */
        header {
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            background: linear-gradient(180deg, rgba(78, 192, 202, 0.95) 0%, rgba(78, 192, 202, 0.85) 100%);
            backdrop-filter: blur(10px);
            border-bottom: 4px solid var(--pipe-green);
        }

        [data-theme="dark"] header {
            background: linear-gradient(180deg, rgba(10, 14, 20, 0.95) 0%, rgba(10, 14, 20, 0.85) 100%);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: var(--pipe-green);
            border: 4px solid var(--pipe-green-dark);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: inset -4px -4px 0 rgba(0,0,0,0.3), inset 4px 4px 0 rgba(255,255,255,0.1);
        }

        .logo-text { display: flex; flex-direction: column; }

        .logo-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--green-accent);
            text-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
            letter-spacing: 0.5px;
        }

        .logo-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
            margin-top: 2px;
        }

        .sol-price {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 18px;
            background: var(--card-bg);
            border: 3px solid var(--pipe-green);
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .sol-logo {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .sol-price-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .sol-change { font-size: 12px; margin-left: 4px; }
        .sol-change.positive { color: var(--green-accent); }
        .sol-change.negative { color: var(--red-accent); }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .turtle-logo {
            width: 56px;
            height: 56px;
            object-fit: cover;
            border-radius: 8px;
        }

        /* Main Content */
        main {
            padding: 30px 40px 120px;
            max-width: 1500px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .page-title {
            text-align: center;
            margin-bottom: 30px;
        }

        .title-main {
            font-size: 48px;
            font-weight: 700;
            color: var(--green-accent);
            text-shadow: 0 0 30px rgba(34, 197, 94, 0.5), 0 4px 0 var(--pipe-green-dark);
            letter-spacing: 2px;
            margin-bottom: 8px;
        }

        .title-sub {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
        }

        /* Category Tabs */
        .category-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            font-size: 13px;
            font-weight: 600;
            padding: 14px 22px;
            border: 3px solid var(--card-border);
            border-radius: 12px;
            background: var(--card-bg);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-family: 'DM Sans', sans-serif;
        }

        .tab:hover {
            transform: translateY(-4px);
            border-color: var(--green-accent);
            color: var(--text-primary);
        }

        .tab.active { transform: translateY(-4px); }

        .tab[data-category="all"].active, .tab[data-category="all"]:hover {
            background: var(--pipe-green);
            border-color: var(--pipe-green-dark);
            color: white;
        }

        .tab[data-category="50k"].active, .tab[data-category="50k"]:hover {
            background: var(--green-accent);
            border-color: #16a34a;
            color: white;
        }

        .tab[data-category="100k"].active, .tab[data-category="100k"]:hover {
            background: var(--yellow-accent);
            border-color: #ca8a04;
            color: #1a1a1a;
        }

        .tab[data-category="200k"].active, .tab[data-category="200k"]:hover {
            background: var(--orange-accent);
            border-color: #ea580c;
            color: white;
        }

        .tab[data-category="homerun"].active, .tab[data-category="homerun"]:hover {
            background: var(--pink-accent);
            border-color: #db2777;
            color: white;
        }

        .tab-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            font-weight: 500;
            margin-top: 4px;
            opacity: 0.7;
        }

        /* Stats Cards */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 3px solid var(--pipe-green);
            border-radius: 14px;
            padding: 18px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--pipe-green), var(--green-accent));
        }

        .stat-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 6px;
            margin-top: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 24px;
            font-weight: 700;
            color: var(--green-accent);
            text-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
        }

        /* Token Table */
        .token-table-container {
            background: var(--card-bg);
            border: 3px solid var(--pipe-green);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            background: linear-gradient(180deg, var(--pipe-green) 0%, var(--pipe-green-dark) 100%);
            border-bottom: 3px solid var(--pipe-green-dark);
        }

        .table-title {
            font-size: 14px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .live-indicator {
            width: 10px;
            height: 10px;
            background: var(--green-accent);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--green-accent);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0,0,0,0.3);
            border: 2px solid var(--pipe-green-dark);
            border-radius: 8px;
            padding: 8px 14px;
        }

        .search-box input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            outline: none;
            width: 180px;
        }

        .search-box input::placeholder { color: var(--text-muted); }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--table-header-bg);
        }

        th {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-secondary);
            text-align: left;
            padding: 14px 16px;
            border-bottom: 2px solid var(--pipe-green);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        th.sortable {
            cursor: pointer;
            transition: color 0.2s;
            user-select: none;
        }

        th.sortable:hover { color: var(--green-accent); }

        th.sortable.active { color: var(--green-accent); }

        tbody tr {
            border-bottom: 1px solid var(--card-border);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        tbody tr:hover {
            background: var(--table-row-hover);
        }

        td {
            padding: 16px;
            vertical-align: middle;
        }

        .token-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .token-icon {
            width: 46px;
            height: 46px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--sky-top), var(--pipe-green));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            border: 3px solid var(--pipe-green);
        }

        .token-image {
            width: 46px;
            height: 46px;
            border-radius: 10px;
            object-fit: cover;
            border: 3px solid var(--pipe-green);
            background: var(--card-bg);
        }

        .token-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 7px;
        }

        .token-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .token-name-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nuked-badge {
            color: #ff4444;
            font-size: 11px;
            font-weight: 700;
            text-shadow: 0 0 8px rgba(255, 68, 68, 0.6);
            animation: nukedPulse 1s ease-in-out infinite;
        }
        
        @keyframes nukedPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .change-positive {
            color: #22c55e;
            font-weight: 600;
        }
        
        .change-negative {
            color: #ef4444;
            font-weight: 600;
        }
        
        .pumpfun-btn {
            background: transparent !important;
            border: none !important;
            padding: 4px !important;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .pumpfun-btn:hover {
            background: rgba(74, 222, 128, 0.1) !important;
            transform: scale(1.1);
        }
        
        .pumpfun-btn svg {
            width: 20px;
            height: 20px;
        }

        .token-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .token-symbol {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-muted);
        }

        .token-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--pipe-green-light);
            cursor: pointer;
        }

        .token-address:hover { color: var(--green-accent); }

        .mcap, .ath {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .ath { color: var(--green-accent); }

        .category-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 700;
            border: 2px solid;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .badge-50k {
            background: rgba(34, 197, 94, 0.2);
            color: var(--green-accent);
            border-color: var(--green-accent);
        }

        .badge-100k {
            background: rgba(234, 179, 8, 0.2);
            color: var(--yellow-accent);
            border-color: var(--yellow-accent);
        }

        .badge-200k {
            background: rgba(249, 115, 22, 0.2);
            color: var(--orange-accent);
            border-color: var(--orange-accent);
        }

        .badge-homerun {
            background: rgba(236, 72, 153, 0.2);
            color: var(--pink-accent);
            border-color: var(--pink-accent);
            animation: homerunPulse 1.5s ease-in-out infinite;
        }

        @keyframes homerunPulse {
            0%, 100% { box-shadow: 0 0 5px rgba(236, 72, 153, 0.3); }
            50% { box-shadow: 0 0 15px rgba(236, 72, 153, 0.6); }
        }

        .time-ago {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .socials-btns {
            display: flex;
            gap: 6px;
        }

        .social-btn {
            width: 34px;
            height: 34px;
            border-radius: 8px;
            border: 2px solid var(--pipe-green);
            background: rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            text-decoration: none;
            color: var(--text-secondary);
        }

        .social-btn:hover {
            background: var(--pipe-green);
            transform: translateY(-2px);
            color: white;
        }

        .social-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* Pipe decorations */
        .pipe-decoration {
            position: fixed;
            width: 60px;
            background: var(--pipe-green);
            border: 4px solid var(--pipe-green-dark);
            z-index: 0;
        }

        .pipe-decoration::before {
            content: '';
            position: absolute;
            left: -8px;
            width: 76px;
            height: 30px;
            background: var(--pipe-green);
            border: 4px solid var(--pipe-green-dark);
            border-radius: 4px;
        }

        .pipe-decoration::after {
            content: '';
            position: absolute;
            left: 4px;
            width: 20px;
            height: 100%;
            background: rgba(255,255,255,0.1);
        }

        .pipe-left { left: 30px; bottom: 80px; height: 200px; }
        .pipe-left::before { bottom: -4px; }

        .pipe-right { right: 30px; top: 100px; height: 180px; }
        .pipe-right::before { top: -4px; }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            position: relative;
            z-index: 10;
        }

        footer p {
            font-size: 14px;
            color: var(--text-muted);
        }

        /* Loading Animation */
        .loading-row {
            animation: fadeInUp 0.4s ease forwards;
            opacity: 0;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .stats-bar { grid-template-columns: repeat(2, 1fr); }
            .pipe-decoration { display: none; }
        }

        @media (max-width: 768px) {
            header { flex-direction: column; gap: 15px; padding: 15px; }
            .sol-price { position: static; transform: none; }
            .header-right { order: -1; }
            .title-main { font-size: 32px; }
            .category-tabs { gap: 8px; }
            .tab { padding: 12px 14px; font-size: 12px; }
            .stats-bar { grid-template-columns: 1fr; }
            .token-table-container { overflow-x: auto; }
            table { min-width: 700px; }
            main { padding: 20px 15px 120px; }
        }
    </style>
</head>
<body>
    <!-- Decorative Elements -->
    <div class="cloud cloud-1"></div>
    <div class="cloud cloud-2"></div>
    <div class="cloud cloud-3"></div>
    <div class="city-bg"></div>
    <div class="pipe-decoration pipe-left"></div>
    <div class="pipe-decoration pipe-right"></div>
    <div class="ground"></div>

    <header>
        <div class="logo">
            <img class="turtle-logo" src="data:image/png;base64,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" alt="TrenchScan">
            <div class="logo-text">
                <div class="logo-title">TrenchScan</div>
            </div>
        </div>

        <div class="sol-price">
            <svg class="sol-logo" width="24" height="24" viewBox="0 0 397.7 311.7" xmlns="http://www.w3.org/2000/svg">
                <linearGradient id="solGrad1" x1="360.879" x2="141.213" y1="351.455" y2="-69.294" gradientTransform="matrix(1 0 0 -1 0 314)" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#00ffa3"/>
                    <stop offset="1" stop-color="#dc1fff"/>
                </linearGradient>
                <linearGradient id="solGrad2" x1="264.829" x2="45.163" y1="401.601" y2="-19.148" gradientTransform="matrix(1 0 0 -1 0 314)" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#00ffa3"/>
                    <stop offset="1" stop-color="#dc1fff"/>
                </linearGradient>
                <linearGradient id="solGrad3" x1="312.548" x2="92.882" y1="376.688" y2="-44.061" gradientTransform="matrix(1 0 0 -1 0 314)" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#00ffa3"/>
                    <stop offset="1" stop-color="#dc1fff"/>
                </linearGradient>
                <path fill="url(#solGrad1)" d="M64.6 237.9c2.4-2.4 5.7-3.8 9.2-3.8h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1l62.7-62.7z"/>
                <path fill="url(#solGrad2)" d="M64.6 3.8C67.1 1.4 70.4 0 73.8 0h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1L64.6 3.8z"/>
                <path fill="url(#solGrad3)" d="M333.1 120.1c-2.4-2.4-5.7-3.8-9.2-3.8H6.5c-5.8 0-8.7 7-4.6 11.1l62.7 62.7c2.4 2.4 5.7 3.8 9.2 3.8h317.4c5.8 0 8.7-7 4.6-11.1l-62.7-62.7z"/>
            </svg>
            <span class="sol-price-value">$<span id="solPrice">--</span></span>
            <span class="sol-change" id="solChange"></span>
        </div>

        <div class="header-right">
            <button class="theme-toggle" onclick="toggleTheme()">
                <span class="icon" id="themeIcon">üåô</span>
                <span id="themeText">Dark</span>
            </button>
        </div>
    </header>

    <main>
        <div class="page-title">
            <h1 class="title-main">TrenchScan</h1>
            <div class="title-sub">The Ultimate Trench Scanner</div>
        </div>

        <div class="category-tabs">
            <button class="tab active" data-category="all" onclick="filterTokens('all')">All Tokens</button>
            <button class="tab" data-category="50k" onclick="filterTokens('50k')">50K Toppers</button>
            <button class="tab" data-category="100k" onclick="filterTokens('100k')">100K Toppers</button>
            <button class="tab" data-category="200k" onclick="filterTokens('200k')">200K Toppers</button>
            <button class="tab" data-category="homerun" onclick="filterTokens('homerun')">
                üöÄ Homerun
                <span class="tab-label">&gt;$500K ATH</span>
            </button>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-label">Total Migrated</div>
                <div class="stat-value" id="totalMigrated">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">24H Migrations</div>
                <div class="stat-value" id="dailyMigrations">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Homerun Rate</div>
                <div class="stat-value" id="homerunRate">0%</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Avg ATH</div>
                <div class="stat-value" id="avgAth">$0</div>
            </div>
        </div>

        <div class="token-table-container">
            <div class="table-header">
                <div class="table-title">
                    <span class="live-indicator"></span>
                    Live Feed
                </div>
                <div class="search-box">
                    <span>üîç</span>
                    <input type="text" placeholder="Search token..." id="searchInput" onkeyup="searchTokens()">
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Token</th>
                        <th>Category</th>
                        <th class="sortable" onclick="sortBy('mcap')" id="sortMcap">Current MC <span id="mcapArrow">‚ñº</span></th>
                        <th>Peak MC</th>
                        <th>Change</th>
                        <th class="sortable" onclick="sortBy('migrated')" id="sortMigrated">Migrated <span id="migratedArrow"></span></th>
                        <th>Links</th>
                    </tr>
                </thead>
                <tbody id="tokenTableBody">
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>¬© 2025 TrenchScan. All rights reserved.</p>
    </footer>

    <script>
        // Bitquery API
        const BITQUERY_URL = 'https://streaming.bitquery.io/eap';
        const BITQUERY_API_KEY = 'ory_at_u-pBWf_apkkV1ZmSusCtE-AUmKfYuiLc3MCpZ2dEKCo.MRM5pB09HlB7HEqPYE9qekrOa4qnI8JVdm4fRToKbOA';
        
        const TOKEN_SUPPLY = 1000000000; // 1 billion
        
        let allTokens = [];
        let filteredTokens = [];
        let currentSort = { field: 'mcap', direction: 'desc' };

        // Step 1: Get tokens that graduated (migrated) in last 48 hours
        async function fetchGraduatedTokens() {
            showLoading(true);
            
            try {
                // Calculate 48 hours ago
                const since = new Date(Date.now() - 48 * 60 * 60 * 1000).toISOString();
                
                // Query for migrations (pump.fun -> PumpSwap) in last 48h
                const query = `
                    {
                        Solana {
                            Instructions(
                                limit: { count: 100 }
                                orderBy: { descending: Block_Time }
                                where: {
                                    Instruction: {
                                        Program: {
                                            Address: { is: "6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P" }
                                        }
                                        Logs: { includes: { includes: "Migrate" } }
                                    }
                                    Transaction: { Result: { Success: true } }
                                    Block: { Time: { since: "${since}" } }
                                }
                            ) {
                                Block {
                                    Time
                                }
                                Transaction {
                                    Signature
                                }
                                Instruction {
                                    Accounts {
                                        Address
                                        Token {
                                            Mint
                                        }
                                    }
                                }
                            }
                        }
                    }
                `;

                const res = await fetch(BITQUERY_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${BITQUERY_API_KEY}`
                    },
                    body: JSON.stringify({ query })
                });

                if (!res.ok) throw new Error(`API Error: ${res.status}`);
                
                const data = await res.json();
                
                if (data.errors) {
                    console.error('Bitquery errors:', data.errors);
                    throw new Error('GraphQL errors');
                }

                const instructions = data?.data?.Solana?.Instructions || [];
                console.log(`Found ${instructions.length} migrations in last 48h`);

                // Extract token mint addresses from migration instructions
                const tokenMints = [];
                const seen = new Set();
                
                instructions.forEach(item => {
                    const accounts = item.Instruction?.Accounts || [];
                    const migrateTime = item.Block?.Time;
                    
                    // Find the token mint (look for pump addresses ending in 'pump')
                    for (const acc of accounts) {
                        const addr = acc.Address || acc.Token?.Mint;
                        if (addr && addr.endsWith('pump') && !seen.has(addr)) {
                            seen.add(addr);
                            tokenMints.push({
                                address: addr,
                                migratedAt: migrateTime
                            });
                            break;
                        }
                    }
                });

                console.log(`Extracted ${tokenMints.length} unique token mints`);

                // Fetch all tokens in parallel batches for faster loading
                allTokens = [];
                const batchSize = 5;
                const maxTokens = Math.min(tokenMints.length, 50);
                
                for (let i = 0; i < maxTokens; i += batchSize) {
                    const batch = tokenMints.slice(i, Math.min(i + batchSize, maxTokens));
                    const batchPromises = batch.map(({ address, migratedAt }) => 
                        fetchTokenData(address, migratedAt)
                    );
                    
                    const results = await Promise.all(batchPromises);
                    const validResults = results.filter(r => r !== null);
                    allTokens.push(...validResults);
                    
                    // Update progress
                    document.getElementById('totalMigrated').textContent = allTokens.length;
                }

                console.log(`Loaded ${allTokens.length} tokens with data`);
                
            } catch (error) {
                console.error('Error fetching tokens:', error);
                allTokens = [];
            }

            filteredTokens = [...allTokens];
            applySorting();
            renderTokens(filteredTokens);
            updateStats();
        }

        // Step 2: Get current price and ATH for a specific token
        async function fetchTokenData(tokenAddress, migratedAt) {
            try {
                const query = `
                    {
                        Solana {
                            DEXTradeByTokens(
                                limit: { count: 1 }
                                orderBy: { descending: Block_Time }
                                where: {
                                    Trade: {
                                        Currency: { MintAddress: { is: "${tokenAddress}" } }
                                        Dex: { ProtocolName: { is: "pump_amm" } }
                                    }
                                    Transaction: { Result: { Success: true } }
                                }
                            ) {
                                Trade {
                                    Currency {
                                        Name
                                        Symbol
                                        MintAddress
                                        Uri
                                    }
                                    PriceInUSD
                                    Price
                                }
                            }
                            ATH: DEXTradeByTokens(
                                where: {
                                    Trade: {
                                        Currency: { MintAddress: { is: "${tokenAddress}" } }
                                        Dex: { ProtocolName: { is: "pump_amm" } }
                                    }
                                    Transaction: { Result: { Success: true } }
                                }
                            ) {
                                Trade {
                                    maxPrice: PriceInUSD(maximum: Trade_PriceInUSD)
                                }
                            }
                            FirstTrade: DEXTradeByTokens(
                                limit: { count: 1 }
                                orderBy: { ascending: Block_Time }
                                where: {
                                    Trade: {
                                        Currency: { MintAddress: { is: "${tokenAddress}" } }
                                    }
                                    Transaction: { Result: { Success: true } }
                                }
                            ) {
                                Block {
                                    Time
                                }
                            }
                        }
                    }
                `;

                const res = await fetch(BITQUERY_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${BITQUERY_API_KEY}`
                    },
                    body: JSON.stringify({ query })
                });

                if (!res.ok) return null;
                
                const data = await res.json();
                if (data.errors) {
                    console.log('Token data errors:', data.errors);
                    return null;
                }

                const trade = data?.data?.Solana?.DEXTradeByTokens?.[0]?.Trade;
                const athData = data?.data?.Solana?.ATH?.[0]?.Trade;
                const firstTradeTime = data?.data?.Solana?.FirstTrade?.[0]?.Block?.Time;
                
                if (!trade) return null;

                // Filter out tokens that migrated within 10 seconds of first trade (deploy)
                if (firstTradeTime && migratedAt) {
                    const deployTime = new Date(firstTradeTime).getTime();
                    const migrateTime = new Date(migratedAt).getTime();
                    const timeDiffSeconds = (migrateTime - deployTime) / 1000;
                    
                    if (timeDiffSeconds < 10) {
                        console.log(`Filtering out ${tokenAddress} - migrated ${timeDiffSeconds.toFixed(1)}s after deploy`);
                        return null;
                    }
                }

                const currentPrice = parseFloat(trade.PriceInUSD || 0);
                const athPrice = parseFloat(athData?.maxPrice || currentPrice);
                
                const currentMcap = currentPrice * TOKEN_SUPPLY;
                const athMcap = Math.max(athPrice * TOKEN_SUPPLY, currentMcap);
                
                // Calculate change from ATH
                const changeFromAth = athMcap > 0 ? ((currentMcap - athMcap) / athMcap) * 100 : 0;
                const isNuked = changeFromAth <= -90;

                // Filter out tokens under 3k MC
                if (currentMcap < 3000) return null;
                
                // Fetch metadata from URI if available
                let twitter = null;
                let website = null;
                let image = null;
                const uri = trade.Currency?.Uri;
                
                if (uri) {
                    try {
                        const metaRes = await fetch(uri);
                        if (metaRes.ok) {
                            const metadata = await metaRes.json();
                            twitter = metadata.twitter || metadata.x || null;
                            website = metadata.website || null;
                            image = metadata.image || null;
                        }
                    } catch (e) {
                        console.log('Failed to fetch metadata for', tokenAddress);
                    }
                }

                return {
                    name: trade.Currency?.Name || 'Unknown',
                    symbol: trade.Currency?.Symbol || '???',
                    address: tokenAddress,
                    icon: getTokenEmoji(trade.Currency?.Symbol),
                    image: image,
                    mcap: currentMcap,
                    ath: athMcap,
                    changeFromAth: changeFromAth,
                    isNuked: isNuked,
                    athLoaded: true,
                    migrated: formatTimeAgo(migratedAt),
                    migratedDate: new Date(migratedAt),
                    category: categorizeByATH(athMcap),
                    twitter: twitter,
                    website: website
                };
            } catch (e) {
                console.log('Error fetching token data:', tokenAddress, e);
                return null;
            }
        }

        // Fetch real SOL price
        async function fetchSolPrice() {
            try {
                const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd&include_24hr_change=true');
                const data = await res.json();
                document.getElementById('solPrice').textContent = data.solana.usd.toFixed(2);
                const change = data.solana.usd_24h_change;
                const el = document.getElementById('solChange');
                el.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(1)}%`;
                el.className = `sol-change ${change >= 0 ? 'positive' : 'negative'}`;
            } catch (e) {
                document.getElementById('solPrice').textContent = '---';
            }
        }

        function categorizeByATH(athMcap) {
            if (athMcap >= 500000) return 'homerun';
            if (athMcap >= 100000) return '200k';
            if (athMcap >= 70000) return '100k';
            return '50k';
        }

        function getTokenEmoji(symbol) {
            const emojiMap = {
                'DOGE': 'üêï', 'DOG': 'üêï', 'SHIB': 'üêï', 'CAT': 'üê±', 'KITTY': 'üê±',
                'PEPE': 'üê∏', 'FROG': 'üê∏', 'APE': 'ü¶ç', 'MOON': 'üåô', 'ROCKET': 'üöÄ',
                'FIRE': 'üî•', 'DIAMOND': 'üíé', 'BEAR': 'üêª', 'BULL': 'üêÇ', 'WOLF': 'üê∫',
                'WHALE': 'üêã', 'CHAD': 'üí™', 'AI': 'ü§ñ', 'FART': 'üí®', 'BONK': 'üêï',
                'BOME': 'üìñ', 'PNUT': 'ü•ú', 'TRENCH': '‚öîÔ∏è', 'ELEPHANT': 'üêò',
            };
            const upper = (symbol || '').toUpperCase();
            for (const [k, v] of Object.entries(emojiMap)) {
                if (upper.includes(k)) return v;
            }
            return 'ü™ô';
        }

        function formatTimeAgo(timestamp) {
            if (!timestamp) return 'N/A';
            const diffMs = Date.now() - new Date(timestamp);
            const mins = Math.floor(diffMs / 60000);
            const hrs = Math.floor(diffMs / 3600000);
            const days = Math.floor(diffMs / 86400000);
            if (mins < 1) return 'just now';
            if (mins < 60) return `${mins}m ago`;
            if (hrs < 24) return `${hrs}h ago`;
            return `${days}d ago`;
        }

        function formatNumber(num) {
            if (num >= 1e9) return '$' + (num / 1e9).toFixed(2) + 'B';
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(1) + 'K';
            return '$' + num.toFixed(0);
        }

        function shortenAddress(addr) {
            return addr ? addr.slice(0, 6) + '...' + addr.slice(-4) : '';
        }

        function getCategoryBadge(cat) {
            const badges = {
                '50k': '<span class="category-badge badge-50k">50K Topper</span>',
                '100k': '<span class="category-badge badge-100k">100K Topper</span>',
                '200k': '<span class="category-badge badge-200k">200K Topper</span>',
                'homerun': '<span class="category-badge badge-homerun">üöÄ Homerun</span>'
            };
            return badges[cat] || '';
        }

        function sortBy(field) {
            document.getElementById('mcapArrow').textContent = '';
            document.getElementById('migratedArrow').textContent = '';
            document.querySelectorAll('th.sortable').forEach(th => th.classList.remove('active'));

            if (currentSort.field === field) {
                currentSort.direction = currentSort.direction === 'desc' ? 'asc' : 'desc';
            } else {
                currentSort.field = field;
                currentSort.direction = 'desc';
            }

            document.getElementById(`sort${field.charAt(0).toUpperCase() + field.slice(1)}`).classList.add('active');
            document.getElementById(`${field}Arrow`).textContent = currentSort.direction === 'desc' ? '‚ñº' : '‚ñ≤';

            applySorting();
            renderTokens(filteredTokens);
        }

        function applySorting() {
            const { field, direction } = currentSort;
            filteredTokens.sort((a, b) => {
                let vA = field === 'migrated' ? a.migratedDate.getTime() : a[field];
                let vB = field === 'migrated' ? b.migratedDate.getTime() : b[field];
                return direction === 'desc' ? vB - vA : vA - vB;
            });
        }

        function renderTokens(tokenList) {
            const tbody = document.getElementById('tokenTableBody');
            tbody.innerHTML = '';

            if (!tokenList || tokenList.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px;color:var(--text-muted);">No tokens found</td></tr>';
                return;
            }

            // Build all rows first, then insert at once
            const fragment = document.createDocumentFragment();

            tokenList.forEach((token, index) => {
                const row = document.createElement('tr');
                row.className = 'token-row';
                row.style.animationDelay = `${index * 0.04}s`;
                
                // Format change from ATH
                const changeText = token.changeFromAth.toFixed(1) + '%';
                const changeClass = token.changeFromAth >= 0 ? 'change-positive' : 'change-negative';
                
                // Nuked indicator
                const nukedBadge = token.isNuked ? '<span class="nuked-badge">üíÄ NUKED</span>' : '';

                row.innerHTML = `
                    <td>
                        <div class="token-info">
                            ${token.image 
                                ? `<img class="token-image" src="${token.image}" alt="${token.symbol}" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"><div class="token-icon" style="display:none">${token.icon}</div>`
                                : `<div class="token-icon">${token.icon}</div>`
                            }
                            <div class="token-details">
                                <div class="token-name-row">
                                    <span class="token-name">${token.name}</span>
                                    ${nukedBadge}
                                </div>
                                <span class="token-symbol">$${token.symbol}</span>
                                <span class="token-address" onclick="copyAddress('${token.address}')">${shortenAddress(token.address)}</span>
                            </div>
                        </div>
                    </td>
                    <td>${getCategoryBadge(token.category)}</td>
                    <td><span class="mcap">${formatNumber(token.mcap)}</span></td>
                    <td><span class="ath">${formatNumber(token.ath)}</span></td>
                    <td><span class="${changeClass}">${changeText}</span></td>
                    <td><span class="time-ago">${token.migrated}</span></td>
                    <td>
                        <div class="socials-btns">
                            ${token.twitter ? `<a class="social-btn" href="${token.twitter.startsWith('http') ? token.twitter : 'https://twitter.com/' + token.twitter}" target="_blank" title="Twitter">ùïè</a>` : ''}
                            ${token.website ? `<a class="social-btn" href="${token.website}" target="_blank" title="Website">üåê</a>` : ''}
                            <a class="social-btn pumpfun-btn" href="https://pump.fun/${token.address}" target="_blank" title="Pump.fun">
                                <svg width="18" height="18" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="20" y="35" width="60" height="30" rx="15" fill="#4ade80" transform="rotate(-45 50 50)"/>
                                    <rect x="20" y="35" width="30" height="30" rx="15" fill="#e8f5e9" transform="rotate(-45 50 50)"/>
                                    <ellipse cx="38" cy="42" rx="3" ry="6" fill="rgba(255,255,255,0.4)" transform="rotate(-45 38 42)"/>
                                </svg>
                            </a>
                        </div>
                    </td>
                `;

                fragment.appendChild(row);
            });

            // Insert all rows at once for smooth rendering
            tbody.appendChild(fragment);
        }

        function filterTokens(category) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.tab[data-category="${category}"]`).classList.add('active');

            if (category === 'all') {
                filteredTokens = [...allTokens];
            } else {
                filteredTokens = allTokens.filter(token => token.category === category);
            }
            applySorting();
            renderTokens(filteredTokens);
        }

        function searchTokens() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (!searchTerm) {
                const activeTab = document.querySelector('.tab.active');
                filterTokens(activeTab?.dataset.category || 'all');
                return;
            }
            filteredTokens = allTokens.filter(token => 
                token.name.toLowerCase().includes(searchTerm) ||
                token.symbol.toLowerCase().includes(searchTerm) ||
                token.address.toLowerCase().includes(searchTerm)
            );
            applySorting();
            renderTokens(filteredTokens);
        }

        function updateStats() {
            const total = allTokens.length;
            const homeruns = allTokens.filter(t => t.category === 'homerun').length;
            const homerunRate = total > 0 ? ((homeruns / total) * 100).toFixed(1) : 0;
            const avgAth = total > 0 ? allTokens.reduce((sum, t) => sum + t.ath, 0) / total : 0;
            const oneDayAgo = Date.now() - 86400000;
            const recent = allTokens.filter(t => t.migratedDate > oneDayAgo).length;

            document.getElementById('totalMigrated').textContent = total.toLocaleString();
            document.getElementById('dailyMigrations').textContent = recent.toLocaleString();
            document.getElementById('homerunRate').textContent = homerunRate + '%';
            document.getElementById('avgAth').textContent = formatNumber(avgAth);
        }

        function copyAddress(address) {
            navigator.clipboard.writeText(address);
        }

        function showLoading(show) {
            const tbody = document.getElementById('tokenTableBody');
            if (show) {
                // Create skeleton loading rows
                let skeletonHTML = '';
                for (let i = 0; i < 10; i++) {
                    skeletonHTML += `
                        <tr class="skeleton-row" style="animation-delay: ${i * 0.05}s">
                            <td>
                                <div class="skeleton-token">
                                    <div class="skeleton skeleton-icon"></div>
                                    <div>
                                        <div class="skeleton skeleton-text name"></div>
                                        <div class="skeleton skeleton-text symbol"></div>
                                    </div>
                                </div>
                            </td>
                            <td><div class="skeleton skeleton-text badge"></div></td>
                            <td><div class="skeleton skeleton-text mcap"></div></td>
                            <td><div class="skeleton skeleton-text mcap"></div></td>
                            <td><div class="skeleton skeleton-text mcap"></div></td>
                            <td><div class="skeleton skeleton-text time"></div></td>
                            <td><div class="skeleton skeleton-text social"></div></td>
                        </tr>
                    `;
                }
                tbody.innerHTML = skeletonHTML;
            }
        }

        // Theme Toggle
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('themeIcon');
            const text = document.getElementById('themeText');
            
            if (body.getAttribute('data-theme') === 'dark') {
                body.removeAttribute('data-theme');
                icon.textContent = 'üåô';
                text.textContent = 'Dark Mode';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'Light Mode';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme preference
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeText').textContent = 'Light Mode';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            fetchSolPrice();
            fetchGraduatedTokens();
            setInterval(fetchSolPrice, 30000);
        });
    </script>
</body>
</html>
